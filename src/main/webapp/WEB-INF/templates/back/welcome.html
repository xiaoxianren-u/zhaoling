<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link rel="stylesheet" th:href="@{/static/css/layui.css}">
    <script th:src="@{/static/js/layui.js}"></script>
    <link rel="stylesheet" th:href="@{/static/icon_1/iconfont.css}">
    <link rel="stylesheet" th:href="@{/static/css/modules/layer/default/layer.css}">
    <link rel="stylesheet" th:href="@{/static/css/modules/code.css}">
    <link rel="stylesheet" th:href="@{/static/css/modules/laydate/default/laydate.css}">
    <link rel="stylesheet" th:href="@{/static/css/public.css}">
    <script th:src="@{/static/js/echarts.js}"></script>
    <script th:src="@{/static/js/jquery-3.5.1.min_2.js}"></script>
    <script th:src="@{/static/js/jquery-3.5.1.min_2.js}"></script>
    <script th:src="@{/static/js/jquery.cookie.js}"></script>
    <script th:src="@{/static/js/cookie.js}"></script>
</head>
<body>
<div class="layuimini-main">

    <div class="layui-bg-gray">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md3">
                <div class="layui-panel">
                    <div>
                        <div class="layui-card">
                            <div class="layui-card-header">
                                <span>访问量</span>
                                <span class="layui-badge layui-bg-blue layuiadmin-badge"
                                      style="float: right;margin-top: 12px">周</span>
                            </div>
                            <div class="layui-card-body layuiadmin-card-list">
                                <p class="layuiadmin-big-font" style="font-size: 30px;color: black;margin-bottom: 20px"
                                   th:text="${stics.access}"></p>
                                <p>
                                    <span>总计访问量</span>
                                    <span class="layuiadmin-span-color" style="float: right">
                                        <span th:if="${stics.visits} > 100000"><span
                                                th:text="${stics.visits}/100"></span>万 </span>
                                        <span th:if="${stics.visits} < 100000" th:text="${stics.visits}"></span>
                                        <i class="layui-inline layui-icon layui-icon-flag"></i>
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md3">
                <div class="layui-panel">
                    <div>
                        <div class="layui-card">
                            <div class="layui-card-header">
                                <span>访问量</span>
                                <span class="layui-badge layui-bg-cyan layuiadmin-badge"
                                      style="float: right;margin-top: 12px">月</span>
                            </div>
                            <div class="layui-card-body layuiadmin-card-list">
                                <p class="layuiadmin-big-font" style="font-size: 30px;color: black;margin-bottom: 20px">
                                    33,555</p>
                                <p>
                                    <span>总计访问量</span>
                                    <span class="layuiadmin-span-color" style="float: right">10% <i
                                            class="layui-inline layui-icon layui-icon-face-smile-b"></i></span>
                                </p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="layui-col-md3">
                <div class="layui-panel">
                    <div>
                        <div class="layui-card">
                            <div class="layui-card-header">
                                <span>访问量</span>
                                <span class="layui-badge layui-bg-cyan layuiadmin-badge"
                                      style="float: right;margin-top: 12px">月</span>
                            </div>
                            <div class="layui-card-body layuiadmin-card-list">
                                <p class="layuiadmin-big-font" style="font-size: 30px;color: black;margin-bottom: 20px">
                                    33,555</p>
                                <p>
                                    <span>总计访问量</span>
                                    <span class="layuiadmin-span-color" style="float: right">10% <i
                                            class="layui-inline layui-icon layui-icon-face-smile-b"></i></span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md3">
                <div class="layui-panel">
                    <div>
                        <div class="layui-card">
                            <div class="layui-card-header">
                                <span>活跃用户</span>
                                <span class="layui-badge layui-bg-orange layuiadmin-badge"
                                      style="float: right;margin-top: 12px">月</span>
                            </div>
                            <div class="layui-card-body layuiadmin-card-list">

                                <p class="layuiadmin-big-font" style="font-size: 30px;color: black;margin-bottom: 20px">
                                    66,666</p>
                                <p>
                                    <span>最近一个月</span>
                                    <span class="layuiadmin-span-color" style="float: right">15% <i
                                            class="layui-inline layui-icon layui-icon-user"></i></span>
                                </p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- 为 ECharts 准备一个定义了宽高的 DOM -->

    <div class="layui-bg-gray">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md9">
                <div class="layui-panel">
                    <div style="padding: 50px 30px;">

                        <div id="tie" style="width:100%;height:400px;"></div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md3">
                <div class="layui-panel">
                    <div style="padding: 50px 30px;">
                        <div id="bin" style="width:100%;height:400px;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="layui-bg-gray">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md6">
                <div class="layui-panel">
                    <div style="padding: 20px 20px;">

                        <div id="main" style="width:100%;height:400px;"></div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md6">
                <div class="layui-panel">
                    <div style="padding: 50px 30px;">一个面板</div>
                </div>
            </div>
        </div>
    </div>


</div>


<script th:inline="javascript" type="text/javascript">

    let list = [[${pol}]];
    // console.log(list );


    // 指定图表的配置项和数据
    let name = [];
    let data = [];
    for (let i = 0; i < list.length - 1; i++) {
        name[i] = list[i].lab_name;
        // console.log(list[i].lab_name);
        let data0 = [];
        data0[0] = list[i].monday;
        data0[1] = list[i].tuesday;
        data0[2] = list[i].wednesday;
        data0[3] = list[i].thursday;
        data0[4] = list[i].friday;
        data0[5] = list[i].saturday;
        data0[6] = list[i].sunday;

        data[i] = {
            name: list[i].lab_name,
            type: 'line',
            stack: 'Total',
            areaStyle: {},
            emphasis: {
                focus: 'series'
            },
            data: data0
        }
    }

    name[list.length - 1] = list[list.length - 1].lab_name;
    let data0 = [];
    data0[0] = list[list.length - 1].monday;
    data0[1] = list[list.length - 1].tuesday;
    data0[2] = list[list.length - 1].wednesday;
    data0[3] = list[list.length - 1].thursday;
    data0[4] = list[list.length - 1].friday;
    data0[5] = list[list.length - 1].saturday;
    data0[6] = list[list.length - 1].sunday;

    data[list.length - 1] = {
        name: list[list.length - 1].lab_name,
        type: 'line',
        stack: 'Total',
        label: {
            show: true,
            position: 'top'
        },
        areaStyle: {},
        emphasis: {
            focus: 'series'
        },
        data: data0
    }


    // console.log(name);
    // console.log(data);


    // 基于准备好的dom，初始化echarts实例
    let myChart = echarts.init(document.getElementById('main'));
    let myChat_tie = echarts.init(document.getElementById('tie'));
    let myChat_bin = echarts.init(document.getElementById('bin'));

    //折线图
    let option_tie = {
        title: {
            text: '上周物品丢失-报表'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: '#6a7985'
                }
            }
        },
        legend: {
            data: name
        },
        toolbox: {
            feature: {
                saveAsImage: {}
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: [
            {
                type: 'category',
                boundaryGap: false,
                data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: data
    };
    myChat_tie.setOption(option_tie);

    //饼图

    let lo = [[${lo}]];
    // console.log(lo);
    let option_bin = {
        title: {
            text: '当月物品丢失情况',
            left: 'left'
        },
        tooltip: {
            trigger: 'item',
            // backgroundColor: 'rgba(0,0,0,1)',
            formatter: '{a} <br/>{b} : {c} ({d}%)'
        },
        legend: {
            x: 'center',
            y: 'bottom',
            orient: 'horizontal',
        },
        series: [
            {
                name: '访问自',
                type: 'pie',
                radius: '50%',
                data: lo

                //     [
                //     {value: 1048, name: '电子产品'},
                //     {value: 735, name: '随身物品'},
                //     {value: 580, name: '书籍'},
                //     {value: 484, name: '钱财'},
                //     {value: 580, name: '贵重物品'},
                //     {value: 484, name: '衣物'}
                // ],
                ,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    myChat_bin.setOption(option_bin);

    // 柱状图

    let re = [[${re}]];
    let daa = [];
    let n = 100;
    daa[0] = ['product', '丢失', '找回', '未找回'];
    for (let i = 0; i < re.length; i++) {
        daa[i + 1] = [re[i].lab_name, re[i].re_lose, re[i].re_return, re[i].re_lose - re[i].re_return];
    }
    // console.log(daa);

    let option = {
        legend: {},
        title: {
            text: '当天物品情况'
        },
        tooltip: {},
        dataset: {
            source: daa
            //     [
            //     ['product', '丢失', '找回', '未找回'],
            //     ['电子产品', 43.3, 85.8, 93.7],
            //     ['随身物品',],
            //     ['书籍', 86.4, 65.2, 82.5],
            //     ['钱财', 72.4, 53.9, 39.1],
            //     ['贵重物品', 1272.4, 53.9, 39.1]
            // ]
        },
        xAxis: {type: 'category'},
        yAxis: {},
        // Declare several bar series, each will be mapped
        // to a column of dataset.source by default.
        series: [{type: 'bar'}, {type: 'bar'}, {type: 'bar'}]
    };
    myChart.setOption(option);

    window.onresize = function () {

        myChart.resize();
        myChat_tie.resize();
        myChat_bin.resize();
    }
</script>

</body>
</html>